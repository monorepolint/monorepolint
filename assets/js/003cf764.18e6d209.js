"use strict";(self.webpackChunk_monorepolint_docs=self.webpackChunk_monorepolint_docs||[]).push([[718],{367:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"rules/package-entry","title":"packageEntry","description":"source","source":"@site/docs/rules/package-entry.md","sourceDirName":"rules","slug":"/rules/package-entry","permalink":"/docs/rules/package-entry","draft":false,"unlisted":false,"editUrl":"https://github.com/monorepolint/monorepolint/edit/main/packages/docs/docs/rules/package-entry.md","tags":[],"version":"current","frontMatter":{"title":"packageEntry"},"sidebar":"docs","previous":{"title":"oncePerPackage","permalink":"/docs/rules/once-per-package"},"next":{"title":"packageOrder","permalink":"/docs/rules/package-order"}}');var i=s(1360),o=s(6225);const t={title:"packageEntry"},l=void 0,a={},c=[{value:"Options",id:"options",level:3},{value:"REMOVE Symbol Support",id:"remove-symbol-support",level:3},{value:"Example",id:"example",level:3},{value:"Use Cases",id:"use-cases",level:3}];function d(e){const n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/monorepolint/monorepolint/blob/main/packages/rules/src/packageEntry.ts",children:"source"})}),"\n",(0,i.jsx)(n.p,{children:"Standardize arbitrary entries in package.json."}),"\n",(0,i.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"entries"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"An object of expected key value pairs for the package.json"}),"\n",(0,i.jsxs)(n.li,{children:["Values can be any type or the ",(0,i.jsx)(n.code,{children:"REMOVE"})," symbol to remove the entry"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"entriesExists"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"An array of expected keys to exist in package.json (without any value enforcement)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"remove-symbol-support",children:"REMOVE Symbol Support"}),"\n",(0,i.jsxs)(n.p,{children:["You can use the ",(0,i.jsx)(n.code,{children:"REMOVE"})," symbol to remove entries from package.json:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'import { packageEntry, REMOVE } from "@monorepolint/rules";\n'})}),"\n",(0,i.jsxs)(n.p,{children:["When using ",(0,i.jsx)(n.code,{children:"REMOVE"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The rule only reports an error if the entry exists"}),"\n",(0,i.jsx)(n.li,{children:"Fixing will remove the entry from package.json"}),"\n",(0,i.jsx)(n.li,{children:"No error is reported if the entry is already missing"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'import { packageEntry, REMOVE } from "@monorepolint/rules";\nexport default {\n  rules: [\n    packageEntry({\n      options: {\n        entries: {\n          author: "Eric L Anderson (https://github.com/ericanderson)",\n\n          // Remove deprecated package.json fields using REMOVE symbol\n          preferGlobal: REMOVE,\n          directories: REMOVE,\n\n          // Standardize license field\n          license: "MIT",\n        },\n        entriesExists: ["bugs"],\n      },\n    }),\n  ],\n};\n'})}),"\n",(0,i.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Field Cleanup"}),": Remove deprecated or unnecessary package.json fields:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'packageEntry({\n  options: {\n    entries: {\n      // Remove deprecated npm fields\n      preferGlobal: REMOVE,\n      directories: REMOVE,\n      "dist-tags": REMOVE,\n\n      // Remove old build configuration\n      "build-config": REMOVE,\n      buildOptions: REMOVE,\n\n      // Remove legacy fields\n      "jsnext:main": REMOVE,\n      "module:next": REMOVE,\n    },\n  },\n});\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Migration Support"}),": Help with package.json migrations:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// Remove old module format fields when migrating to modern exports\npackageEntry({\n  options: {\n    entries: {\n      // Remove old module fields\n      main: REMOVE,\n      module: REMOVE,\n      browser: REMOVE,\n      types: REMOVE,\n      typings: REMOVE,\n\n      // Ensure modern exports field exists (value enforcement handled elsewhere)\n      exports: { ".": "./dist/index.js" },\n    },\n  },\n});\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Mixed Operations"}),": Combine removal with standardization:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'packageEntry({\n  options: {\n    entries: {\n      // Standardize these fields\n      author: "Your Name <your.email@example.com>",\n      license: "MIT",\n      homepage: "https://github.com/yourorg/yourproject",\n\n      // Remove deprecated fields\n      preferGlobal: REMOVE,\n      directories: REMOVE,\n\n      // Remove old tooling configuration (moved to separate files)\n      babel: REMOVE,\n      eslintConfig: REMOVE,\n      prettier: REMOVE,\n      jest: REMOVE,\n    },\n    entriesExists: [\n      "name",\n      "version",\n      "description",\n      "repository",\n    ],\n  },\n});\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Conditional Field Management"}),": Use different rules for different package types:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// Remove private package fields from public packages\npackageEntry({\n  options: {\n    entries: {\n      private: REMOVE,\n      "internal-notes": REMOVE,\n      "dev-scripts": REMOVE,\n    },\n  },\n  excludePackages: ["@internal/*"],\n}),\n  // Ensure private packages have required internal fields\n  packageEntry({\n    options: {\n      entries: {\n        private: true,\n        "internal-owner": "platform-team",\n      },\n    },\n    includePackages: ["@internal/*"],\n  });\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Repository Cleanup"}),": Remove repository-specific configuration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'packageEntry({\n  options: {\n    entries: {\n      // Remove local development configuration\n      "local-config": REMOVE,\n      "dev-server": REMOVE,\n\n      // Remove build artifacts configuration\n      "build-hash": REMOVE,\n      "last-build": REMOVE,\n\n      // Remove old CI/CD configuration\n      "travis": REMOVE,\n      "appveyor": REMOVE,\n      "circle": REMOVE,\n    },\n  },\n});\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Publishing Configuration"}),": Clean up publishing-related fields:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'packageEntry({\n  options: {\n    entries: {\n      // Remove development-only publishing config\n      publishConfig: REMOVE,\n      "npm-publish": REMOVE,\n\n      // Remove old registry configuration\n      "registry-url": REMOVE,\n      "publish-registry": REMOVE,\n\n      // Standardize publishing fields\n      files: ["dist", "build", "*.md"],\n      publishConfig: {\n        access: "public",\n        registry: "https://registry.npmjs.org/",\n      },\n    },\n  },\n});\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},6225:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(6364);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);